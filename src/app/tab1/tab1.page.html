<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title> Estudiantes </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-grid>
    <ion-row>
      <ion-col size="4">
        <ion-item>
          <ion-label position="floating">Nombre</ion-label>
          <ion-input type="text" [(ngModel)]="student.name" #nombre></ion-input>
        </ion-item>
      </ion-col>
      <ion-col size="4">
        <ion-item>
          <ion-label position="floating">Correo</ion-label>
          <ion-input type="email" [(ngModel)]="student.email"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col size="2">
        <ion-item>
          <ion-label position="floating">Numero de control</ion-label>
          <ion-input type="text" [(ngModel)]="student.controlNumber">
          </ion-input>
        </ion-item>
      </ion-col>
      <ion-col size="1">
        <ion-item>
          <ion-label position="floating">Edad</ion-label>
          <ion-input type="number" [(ngModel)]="student.age"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col size="1">
        <ion-item>
          <ion-label position="floating">NIP</ion-label>
          <ion-input type="number" [(ngModel)]="student.nip"></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="4">
        <ion-item>
          <ion-label position="floating">Carrera</ion-label>
          <ion-select
            placeholder="Seleccione una carrera"
            interface="popover"
            [(ngModel)]="student.career"
          >
            <ion-select-option
              *ngFor="let carrera of carreras"
              [value]="carrera.acronym"
            >
              {{carrera.name}}
            </ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
      <ion-col size="4">
        <ion-item>
          <ion-label position="floating">Curp</ion-label>
          <ion-input type="text" [(ngModel)]="student.curp"></ion-input>
        </ion-item>
      </ion-col>
      <ion-col size="4">
        <ion-button
          (click)="newStudent()"
          expand="block"
          shape="round"
          fill="outline"
          size="large"
          [color]="validStudent() ? 'primary' : 'danger'"
          [disabled]="!validStudent()"
        >
          <ion-icon slot="icon-only" name="add"></ion-icon>
        </ion-button>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="6">
        <ion-searchbar
          placeholder="Buscar"
          (ionChange)="filterStudents($event)"
        ></ion-searchbar>
      </ion-col>
      <ion-col size="6">
        <ion-item>
          <ion-label position="floating">Filtro</ion-label>
          <ion-select
            value="control"
            interface="popover"
            placeholder="Selecciona un filtro"
            #filtro
          >
            <ion-select-option value="name">Nombre</ion-select-option>
            <ion-select-option value="career">Carrera</ion-select-option>
            <ion-select-option value="control"
              >N&uacute;mero de control</ion-select-option
            >
            <ion-select-option value="correo">correo</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12">
        <ion-list>
          <ion-item *ngFor="let student of filteredStudents; let i = index;">
            <ion-grid>
              <ion-row>
                <ion-col size="1">
                  <ion-avatar>
                    <img src="{{student.photo}}" />
                  </ion-avatar>
                </ion-col>
                <ion-col size="5">
                  <ion-label>
                    <ion-chip color="primary" outline="true">
                      <ion-label>
                        <h3>{{student.career}}</h3>
                      </ion-label>
                    </ion-chip>
                    <h2>{{student.name}}</h2>
                  </ion-label>
                </ion-col>
                <ion-col size="4" class="ion-margin-vertical">
                  <ion-label>
                    <p>{{student.email}}</p>
                  </ion-label>
                </ion-col>
                <ion-col size="2">
                  <ion-button
                    (click)="deleteStudent(student.controlNumber)"
                    fill="outline"
                    color="danger"
                    class="ion-margin-end"
                  >
                    <ion-icon
                      slot="icon-only"
                      name="trash"
                      color="danger"
                    ></ion-icon>
                  </ion-button>
                  <ion-button (click)="updateStudent(student)" fill="outline">
                    <ion-icon slot="icon-only" name="create"></ion-icon>
                  </ion-button>
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
